import{r as p,e as G,o as l,c as r,a as e,u as s,F as E,f as O,g as P,d as F,t as w,n as z,h as R,v as U,i as W,_ as Q,j as X,k as L,l as Y,m as B,p as Z,q as ee,s as te}from"./Cs7W1Q7g.js";const _=p({retries:3,retryDelay:1e3,timeout:5e3,cacheDuration:6e4,async:!1,override:!1,skipCache:!1,logging:!0});function I(){const x=p(new Map),o=p(new Map);function n(a,y,...h){if(_.value.logging){const S=new Date().toISOString();console[a](`[${S}] ${a.toUpperCase()}: ${y}`,...h)}}function t(a){const y=new AbortController,h=setTimeout(()=>{y.abort(),n("warn",`Request timed out after ${a}ms`)},a);return{controller:y,clearTimeout:()=>clearTimeout(h)}}function i(a,y){const h=new URLSearchParams(y).toString();return h?`${a}?${h}`:a}function c(a,y){return Date.now()-a<y}async function g({apiRequest:a,retries:y,retryDelay:h,cancellationToken:S,timeout:M,cacheDuration:$,skipCache:A},H){const{method:v,endpoint:u,headers:d={},queryParams:f={},body:V}=a,N=i(u,f);if(!A&&$&&$>0){const m=o.value.get(N);if(m&&c(m.timestamp,$))return n("info",`Returning cached response for: ${N}`),m.data}let C=S||new AbortController,j;if(M){const m=t(M);C=m.controller,j=m.clearTimeout}const T=C.signal;return(async()=>{n("info","Attempting network call",{endpoint:u,method:v,attempt:H});try{const m={method:v,headers:{"Content-Type":"application/json",...d},signal:T};["POST","PUT","PATCH"].includes(v)&&V&&(m.body=JSON.stringify(V));const q=await fetch(u,m);if(!q.ok)throw new Error(`Failed to fetch: ${q.statusText}`);const K=await q.json();return n("info","Network call successful",{endpoint:u,method:v,attempt:H,result:K}),$&&$>0&&(o.value.set(N,{data:K,timestamp:Date.now()}),n("info",`Response cached for: ${N}`,{cacheDuration:$})),K}catch(m){if(m.name==="AbortError")n("warn","Request aborted:",{endpoint:u});else return n("error","Request failed:",{error:m,endpoint:u}),m;if(y&&H<y)return n("warn",`Retrying... Attempt ${H+1}`,{endpoint:u,method:v,retryDelay:h}),await new Promise(q=>setTimeout(q,h)),g({apiRequest:a,retries:y,retryDelay:h,cancellationToken:S,timeout:M,cacheDuration:$,skipCache:A},H+1);throw m}finally{j&&j()}})()}async function b({apiRequest:a,async:y,override:h,retries:S,retryDelay:M,cancellationToken:$,timeout:A,cacheDuration:H,skipCache:v}){const{method:u,endpoint:d,headers:f={},queryParams:V={},body:N}=a,C={async:y!==void 0?y:_.value.async,override:h!==void 0?h:_.value.override,retries:S!==void 0?S:_.value.retries,retryDelay:M!==void 0?M:_.value.retryDelay,timeout:A!==void 0?A:_.value.timeout,cacheDuration:H!==void 0?H:_.value.cacheDuration,skipCache:v!==void 0?v:_.value.skipCache},j=new URLSearchParams(V).toString(),T=j?`${d}?${j}`:d;n("info","Starting API call",{url:T,method:u,mergedOptions:C}),x.value.has(T)&&(C.override?(x.value.get(T).controller.abort(),x.value.delete(T),n("info",`Aborted ongoing request for: ${T}`)):C.async||(n("info",`Waiting for ongoing request to complete for: ${T}`),await x.value.get(T).promise));const J=g({apiRequest:a,retries:C.retries,retryDelay:C.retryDelay,cancellationToken:$,timeout:C.timeout,cacheDuration:C.cacheDuration,skipCache:C.skipCache},0);x.value.set(T,{controller:$||new AbortController,promise:J});try{const m=await J;return n("info",`API call completed for: ${T}`,{result:m}),m}catch(m){throw n("error",`API call failed for: ${T}`,{error:m}),m}finally{x.value.delete(T)}}function k(a){_.value={..._.value,...a},n("info","Global config updated",{newConfig:a})}return{executeCall:b,updateGlobalConfig:k}}const oe={class:"method-container"},se={class:"method-menu"},ne={key:0},le=["onClick"],ae={class:"my-4"},re={class:"box"},ie=G({__name:"APIMethod",setup(x){const o=D();return(n,t)=>(l(),r("div",oe,[t[2]||(t[2]=e("p",{class:"text-2xl bold my-2"},"Method Type",-1)),e("div",se,[s(o).httpMethods.length>0?(l(),r("ul",ne,[(l(!0),r(E,null,O(s(o).httpMethods,(i,c)=>(l(),r("li",{key:c,class:z({"active-method":s(o).httpMethods[c]===s(o).currentHttpsMethod}),onClick:g=>s(o).handleMethodTabClick(c)},w(i),11,le))),128))])):P("",!0)]),e("p",ae,[t[0]||(t[0]=F(" Testing ")),e("code",re,w(s(o).currentHttpsMethod),1),t[1]||(t[1]=F(" method "))])]))}}),de={class:"method-container"},ue={class:"flex justify-around"},ce={class:"box"},pe={class:"flex justify-between"},ve=["onUpdate:modelValue"],fe=["onUpdate:modelValue"],me={key:2},ye={class:"box"},he=G({__name:"GlobalConfig",setup(x){const{updateGlobalConfig:o}=I();return o(_.value),(n,t)=>(l(),r("div",de,[t[2]||(t[2]=e("p",{class:"text-2xl bold my-2"},"Configure Defaults",-1)),e("div",ue,[e("div",ce,[t[0]||(t[0]=e("p",{class:"text-xl font-bold"},"Edit Default Values",-1)),(l(!0),r(E,null,O(s(_),(i,c,g)=>(l(),r("div",{key:g,class:"my-3"},[e("div",pe,[e("label",null,w(c)+": ",1),typeof i=="string"||typeof i=="number"?R((l(),r("input",{key:0,type:"text","onUpdate:modelValue":b=>s(_)[c]=b},null,8,ve)),[[U,s(_)[c],void 0,{number:!0}]]):typeof i=="boolean"?R((l(),r("input",{key:1,type:"checkbox","onUpdate:modelValue":b=>s(_)[c]=b},null,8,fe)),[[W,s(_)[c]]]):(l(),r("span",me,"Unsupported type"))])]))),128))]),e("div",ye,[t[1]||(t[1]=e("p",{class:"text-xl font-bold"},"Live Preview of Default Values",-1)),e("pre",null,"                    "+w(s(_))+`
                `,1)])])]))}}),_e=Q(he,[["__scopeId","data-v-a101d3e6"]]),ge={class:"method-container"},be={class:"w-100 flex flex-row justify-end"},we=G({__name:"Response",setup(x){const o=D(),n=p("Copy"),t=async()=>{try{if(o.response.length<0)throw n.value="Response Empty!","Empty Response";await navigator.clipboard.writeText(JSON.stringify(o.response)),n.value="Copied!",setTimeout(()=>{n.value="Copy"},2e3)}catch(i){console.error("Failed to copy text:",i)}};return(i,c)=>(l(),r("div",ge,[c[0]||(c[0]=e("p",{class:"text-2xl bold my-2"},"Response",-1)),e("div",be,[e("button",{onClick:t},w(s(n)),1)]),e("pre",null,"            "+w(s(o).response)+`
        `,1)]))}}),xe={class:"method-container"},Ce={class:"flex justify-around"},$e={class:"box"},Te={class:"flex items-center justify-between"},He={class:"flex justify-between"},ke={class:"text-sm font-bold"},Se={class:"flex items-center justify-between"},Me=["onUpdate:modelValue"],Ve=["onClick"],Pe={key:1},Ae={class:"flex justify-between mt-2"},Ee={key:3,class:"text-red-500 text-sm mt-2"},Ne={class:"box"},Re={key:0},Oe={key:1,class:"text-red-500 text-sm mt-2"},je={class:"textarea-container"},Ue={class:"line-numbers"},Ge=["disabled"],qe={key:0,class:"pre-container my-2"},Be={class:"line-numbers"},De={class:"pre-with-lines"},Fe=G({__name:"HeaderBodyConfig",setup(x){const o=D(),{updateGlobalConfig:n}=I(),t=p(""),i=p(""),c=p(""),g=p(!1),b=p(""),k=p(""),a=p(""),y=p(0),h=p(null),S=()=>{t.value&&i.value?(o.addNewHeader(t.value,i.value),$()):(g.value=!0,c.value="Please fill in both key and value.")},M=X(()=>!!(b.value&&!a.value)),$=()=>{o.newHeaderCreationActive=!1,t.value="",i.value="",g.value=!1,c.value=""},A=()=>{try{const u=JSON.parse(b.value);k.value=JSON.stringify(u,null,2),o.body=u,a.value=""}catch{a.value="Invalid JSON format.",k.value=""}},H=()=>{const u=h.value;u&&(u.style.height="auto",u.style.height=`${u.scrollHeight}px`,y.value=u.scrollHeight)},v=u=>{const d=u.target,f=d.previousElementSibling;f&&(f.scrollTop=d.scrollTop)};return L(b,H),L(()=>b.value,H),n(_.value),(u,d)=>(l(),r("div",xe,[d[7]||(d[7]=e("p",{class:"text-2xl bold my-2"},"Configure Headers & Body",-1)),e("div",Ce,[e("div",$e,[e("header",Te,[d[5]||(d[5]=e("p",{class:"text-xl font-bold"},"Add/Remove Headers",-1)),e("button",{onClick:d[0]||(d[0]=(...f)=>s(o).toggleNewHeaderCreation&&s(o).toggleNewHeaderCreation(...f))},w(s(o).newHeaderCreationActive?"Cancel":"+"),1)]),s(o).newHeaderCreationActive?P("",!0):(l(!0),r(E,{key:0},O(s(o).headers,(f,V,N)=>(l(),r("div",{key:N,class:"my-3"},[e("div",He,[e("label",ke,w(V)+":",1),e("div",Se,[R(e("input",{type:"text",class:"w-60 mr-1","onUpdate:modelValue":C=>s(o).headers[V]=C},null,8,Me),[[U,s(o).headers[V]]]),e("button",{onClick:C=>s(o).removeHeader(V)},"-",8,Ve)])])]))),128)),s(o).newHeaderCreationActive?(l(),r("div",Pe,[e("div",Ae,[R(e("input",{placeholder:"Key",type:"text",class:"w-60 mr-1","onUpdate:modelValue":d[1]||(d[1]=f=>t.value=f)},null,512),[[U,t.value]]),R(e("input",{placeholder:"Value",type:"text",class:"w-60 mr-1","onUpdate:modelValue":d[2]||(d[2]=f=>i.value=f)},null,512),[[U,i.value]])])])):P("",!0),s(o).newHeaderCreationActive?(l(),r("button",{key:2,class:"mt-2",onClick:d[3]||(d[3]=f=>S())}," Save ")):P("",!0),g.value?(l(),r("div",Ee,w(c.value),1)):P("",!0)]),e("div",Ne,[d[6]||(d[6]=e("p",{class:"text-xl font-bold"},"Request Body",-1)),s(o).currentHttpsMethod==="GET"?(l(),r("p",Re," (Disabled for GET method) ")):P("",!0),a.value?(l(),r("p",Oe,w(a.value),1)):P("",!0),e("div",je,[e("div",Ue,[(l(!0),r(E,null,O(b.value.split(`
`).length,f=>(l(),r("span",{key:f},w(f),1))),128))]),R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=f=>b.value=f),onInput:A,class:"textarea-with-lines",placeholder:"Enter request body",ref_key:"textareaRef",ref:h,style:Y({backgroundColor:a.value||s(o).currentHttpsMethod==="GET"?"#f8d7da":"#fff"}),onScroll:v,disabled:s(o).currentHttpsMethod==="GET"},null,44,Ge),[[U,b.value]])])])]),s(M)?(l(),r("div",qe,[e("div",Be,[(l(!0),r(E,null,O(k.value.split(`
`).length,f=>(l(),r("span",{key:f},w(f),1))),128))]),e("pre",De,w(k.value),1)])):P("",!0),d[8]||(d[8]=e("p",{class:"text-sm mt-2"}," Note: The body is only used for POST, PUT, and PATCH methods. ",-1))]))}}),Ie=Q(Fe,[["__scopeId","data-v-b05e4a48"]]),Je={class:"method-container"},Ke={class:"method-menu"},Le=G({__name:"APIEndpointSetup",setup(x){const o=D();return(n,t)=>(l(),r("div",Je,[t[2]||(t[2]=e("p",{class:"text-2xl bold my-2"},"Endpoint Setup",-1)),t[3]||(t[3]=e("p",null,'Enter a custom endpoint with "https://" included.',-1)),t[4]||(t[4]=e("p",null,"Current default endpoint is 'https://dummyjson.com/products'",-1)),e("div",Ke,[R(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>s(o).endpoint=i)},null,512),[[U,s(o).endpoint]]),e("button",{onClick:t[1]||(t[1]=i=>s(o).handleTestButton()),class:"m-2"}," Test ")])]))}}),ze=[{title:"Configure Globals",isVisible:!1,component:B(_e)},{title:"Configure Method Type",isVisible:!0,component:B(ie)},{title:"Configure Headers & Body",isVisible:!0,component:B(Ie)},{title:"Configure Endpoint",isVisible:!0,component:B(Le)},{title:"Response",isVisible:!1,component:B(we)}],D=Z("playground",()=>{const{executeCall:x,updateGlobalConfig:o}=I(),n=p([...ze]),t=p({"Content-Type":"application/json"}),i=p(""),c=p(["GET","POST","DELETE","PUT","PATCH"]),g=p("GET"),b=p("https://dummyjson.com/products/1"),k=p({});p({status:"idle",message:"Response State",data:{}});const a=p(!1);return{playgroundMainMenu:n,httpMethods:c,currentHttpsMethod:g,endpoint:b,response:k,toggleOptionView:v=>{n.value[v].isVisible=!n.value[v].isVisible},handleMethodTabClick:v=>{g.value!==c.value[v]&&(g.value=c.value[v])},handleTestButton:async()=>{k.value=await x({apiRequest:{headers:t.value,endpoint:b.value,body:g.value!=="GET"?i.value:void 0,method:g.value},skipCache:!1}),k.value&&(n.value[3].isVisible||(n.value[3].isVisible=!0))},headers:t,body:i,addNewHeader:(v,u)=>{v&&u&&(t.value[v]=u)},removeHeader:v=>{t.value[v]&&delete t.value[v]},saveHeader:()=>{},newHeaderCreationActive:a,toggleNewHeaderCreation:()=>{a.value=!a.value}}}),Qe={class:"method-container"},We={class:"menu flex flex-row justify-between items-center"},Xe={class:"main-menu"},Ye={class:"flex flex-row"},Ze=["onClick"],et={class:"my-4"},tt={class:"box"},st=G({__name:"playground",setup(x){I();const o=D();return o.httpMethods,p(0),p(),o.endpoint,(n,t)=>(l(),r(E,null,[e("div",Qe,[e("div",We,[e("div",Xe,[e("div",Ye,[(l(!0),r(E,null,O(s(o).playgroundMainMenu,(i,c)=>(l(),r("div",null,[e("div",{class:z(`box m-1 button ${i.isVisible?"text-teal-400 bg-slate-700":""}`),onClick:g=>s(o).toggleOptionView(c)},[e("span",null,w(i.title),1)],10,Ze)]))),256))])]),e("div",null,[e("p",et,[t[0]||(t[0]=F(" Testing ")),e("code",tt,w(s(o).currentHttpsMethod),1),t[1]||(t[1]=F(" method "))])])])]),(l(!0),r(E,null,O(s(o).playgroundMainMenu,i=>(l(),r("div",null,[i.isVisible?(l(),ee(te(i.component),{key:0,markRaw:""})):P("",!0)]))),256))],64))}});export{st as _};
